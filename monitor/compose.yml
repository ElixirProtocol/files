services:
  grafana:
      image: grafana/grafana@sha256:8b37a2f028f164ce7b9889e1765b9d6ee23fec80f871d156fbf436d6198d32b7
      ports:
        - "3000:3000"
      volumes:
        - grafana-data:/var/lib/grafana
      env_file:
        - ./grafana/.env
        
  prometheus:
      image: prom/prometheus@sha256:5888c188cf09e3f7eebc97369c3b2ce713e844cdbd88ccf36f5047c958aea120
      volumes:
        - ./prometheus/prometheus.yml:/etc/prometheus/prometheus.yml
      
  elixir-validator:
      image: elixirprotocol/validator:testnet
      # image: elixirprotocol/validator # for production
      platform: linux/amd64
      logging:
        driver: json-file
        options:
          max-size: "10m"
          max-file: "3"
      restart: unless-stopped
      # ports:
        # if separate prometheus and elixir-validator servers, use "17690:17690" to allow prometheus to scrape metrics
        # - "17690:17690"
      env_file:
        - ./elixir/.env

volumes:
  grafana-data:
